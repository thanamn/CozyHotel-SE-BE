<html><head><meta charset="utf-8"/><title>CozyHotel Test Report</title><style type="text/css">:root {
  --text-primary: #111;
  --text-secondary: #4f4f4f;
  --success: #006633;
  --success-bright: #80ffbf;
  --danger: #cc071e;
  --danger-bright: #fbdfe0;
  --warning: #995c00;
  --warning-bright: #ffeea8;
  --panel: #eee;
  --border: #949494;
  --disabled: #6b6b6b;
}

html,
body {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 16px;
  margin: 0;
  padding: 0;
  color: var(--text-primary);
}
body {
  padding: 2rem 1rem;
}
.jesthtml-content {
  margin: 0 auto;
  max-width: 70rem;
}
header {
  display: flex;
  align-items: center;
}
#title {
  margin: 0;
  flex-grow: 1;
}
#logo {
  height: 4rem;
}
#timestamp {
  color: var(--text-secondary);
  margin-top: 0.5rem;
}

#metadata-container {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  margin-bottom: 2rem;
}

.additional-information-container {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  color: var(--text-secondary);
}

/** SUMMARY */
#summary {
  color: var(--text-primary);
  display: flex;
  font-family: monospace;
  font-size: 1rem;
}
#summary > div {
  margin-right: 0.5rem;
  background: var(--panel);
  padding: 1rem;
  min-width: 15rem;
}
#summary > div:last-child {
  margin-right: 0;
}
@media only screen and (max-width: 720px) {
  #summary {
    flex-direction: column;
  }
  #summary > div {
    margin-right: 0;
    margin-top: 1rem;
  }
  #summary > div:first-child {
    margin-top: 0;
  }
}

.summary-total {
  font-weight: bold;
  margin-bottom: 0.5rem;
}
.summary-passed {
  color: var(--success);
  border-left: 0.4rem solid var(--success);
  padding-left: 0.5rem;
  margin-bottom: 0.15rem;
}
.summary-failed,
.summary-obsolete-snapshots {
  color: var(--danger);
  border-left: 0.4rem solid var(--danger);
  padding-left: 0.5rem;
  margin-bottom: 0.15rem;
}
.summary-pending {
  color: var(--warning);
  border-left: 0.4rem solid var(--warning);
  padding-left: 0.5rem;
  margin-bottom: 0.15rem;
}
.summary-empty {
  color: var(--disabled);
  border-left: 0.4rem solid var(--disabled);
  margin-bottom: 0.15rem;
}

.test-result {
  padding: 1rem;
  margin-bottom: 0.25rem;
}
.test-result:last-child {
  border: 0;
}
.test-result.passed {
  background-color: var(--success-bright);
  color: var(--success);
}
.test-result.failed {
  background-color: var(--danger-bright);
  color: var(--danger);
}
.test-result.pending {
  background-color: var(--warning-bright);
  color: var(--warning);
}

.test-info {
  display: flex;
  justify-content: space-between;
}
.test-suitename {
  width: 20%;
  text-align: left;
  font-weight: bold;
  word-break: break-word;
}
.test-title {
  width: 40%;
  text-align: left;
  font-style: italic;
}
.test-status {
  width: 20%;
  text-align: right;
}
.test-duration {
  width: 10%;
  text-align: right;
  font-size: 0.85rem;
}

.failureMessages {
  padding: 0 1rem;
  margin-top: 1rem;
  border-top: 1px dashed var(--danger);
}
.failureMessages.suiteFailure {
  border-top: none;
}
.failureMsg {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}

.suite-container {
  margin-bottom: 1rem;
}
.suite-info {
  padding: 1rem;
  background-color: var(--panel);
  color: var(--text-secondary);
  border: 0.15rem solid;
  border-color: var(--panel);
  display: flex;
  align-items: center;
  margin-bottom: 0.25rem;
}
.suite-info:hover {
  border-color: var(--border);
  cursor: pointer;
}
.suite-info .suite-path {
  word-break: break-all;
  flex-grow: 1;
  font-family: monospace;
  font-size: 1rem;
}
.suite-info .suite-time {
  margin-left: 1rem;
  padding: 0.2rem 0.3rem;
  font-size: 0.85rem;
}
.suite-info .suite-time.warn {
  background-color: var(--danger);
  color: #fff;
}
.suite-info:before {
  content: "\2303";
  display: inline-block;
  margin-right: 1rem;
  transform: rotate(180deg) translateY(0.15rem);
}
.suite-container[open] .suite-info:before {
  transform: rotate(0deg) translateY(0.15rem);
}

/* CONSOLE LOGS */
.suite-consolelog {
  margin-bottom: 0.25rem;
  padding: 1rem;
  background-color: var(--panel);
}
.suite-consolelog-header {
  font-weight: bold;
}
.suite-consolelog-item {
  padding: 0.5rem;
}
.suite-consolelog-item pre {
  margin: 0.5rem 0;
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}
.suite-consolelog-item-origin {
  color: var(--text-secondary);
  font-weight: bold;
}
.suite-consolelog-item-message {
  color: var(--text-primary);
  font-size: 1rem;
  padding: 0 0.5rem;
}

/* OBSOLETE SNAPSHOTS */
.suite-obsolete-snapshots {
  margin-bottom: 0.25rem;
  padding: 1rem;
  background-color: var(--danger-bright);
  color: var(--danger);
}
.suite-obsolete-snapshots-header {
  font-weight: bold;
}
.suite-obsolete-snapshots-item {
  padding: 0.5rem;
}
.suite-obsolete-snapshots-item pre {
  margin: 0.5rem 0;
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}
.suite-obsolete-snapshots-item-message {
  color: var(--text-primary);
  font-size: 1rem;
  padding: 0 0.5rem;
}
</style></head><body><main class="jesthtml-content"><header><h1 id="title">CozyHotel Test Report</h1></header><section id="metadata-container"><div id="timestamp">Started: 2025-04-28 20:58:10</div><div id="summary"><div id="suite-summary"><div class="summary-total">Suites (22)</div><div class="summary-passed ">20 passed</div><div class="summary-failed ">2 failed</div><div class="summary-pending  summary-empty">0 pending</div></div><div id="test-summary"><div class="summary-total">Tests (191)</div><div class="summary-passed ">188 passed</div><div class="summary-failed ">3 failed</div><div class="summary-pending  summary-empty">0 pending</div></div></div></section><details id="suite-1" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\models\RoomType.test.js</div><div class="suite-time">2.74s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; Validation</div><div class="test-title">should validate a valid room type</div><div class="test-status">passed</div><div class="test-duration">0.084s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; Validation</div><div class="test-title">should require hotelId</div><div class="test-status">passed</div><div class="test-duration">0.017s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; Validation</div><div class="test-title">should require name</div><div class="test-status">passed</div><div class="test-duration">0.012s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; Validation</div><div class="test-title">should enforce valid bed types</div><div class="test-status">passed</div><div class="test-duration">0.011s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; Validation</div><div class="test-title">should require positive totalRooms</div><div class="test-status">passed</div><div class="test-duration">0.01s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; Validation</div><div class="test-title">should enforce valid facilities</div><div class="test-status">passed</div><div class="test-duration">0.009s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; checkAvailability Method</div><div class="test-title">should show all rooms available when no bookings exist</div><div class="test-status">passed</div><div class="test-duration">0.113s</div></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; checkAvailability Method</div><div class="test-title">should handle room under maintenance</div><div class="test-status">failed</div><div class="test-duration">0.102s</div></div><div class="failureMessages"> <pre class="failureMsg">Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.toBe (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\models\RoomType.test.js:114:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; checkAvailability Method</div><div class="test-title">should correctly calculate availability with existing bookings</div><div class="test-status">passed</div><div class="test-duration">0.089s</div></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; checkAvailability Method</div><div class="test-title">should show fully booked when all rooms are taken</div><div class="test-status">failed</div><div class="test-duration">0.102s</div></div><div class="failureMessages"> <pre class="failureMsg">Error: expect(received).toBe(expected) // Object.is equality

Expected: "fully_booked"
Received: undefined
    at Object.toBe (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\models\RoomType.test.js:165:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomType Model &gt; checkAvailability Method</div><div class="test-title">should handle non-existent room type</div><div class="test-status">passed</div><div class="test-duration">0.081s</div></div></div></div></details><details id="suite-2" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\middleware\auth.test.js</div><div class="suite-time">0.392s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Middleware &gt; protect</div><div class="test-title">should fail if no token is provided</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Middleware &gt; protect</div><div class="test-title">should verify Bearer token</div><div class="test-status">passed</div><div class="test-duration">0.011s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Middleware &gt; protect</div><div class="test-title">should fail with invalid token</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Middleware &gt; authorize</div><div class="test-title">should allow authorized roles</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Middleware &gt; authorize</div><div class="test-title">should reject unauthorized roles</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">Auth Middleware &gt; authorize</div><div class="test-title">should handle missing user</div><div class="test-status">failed</div><div class="test-duration">0.001s</div></div><div class="failureMessages"> <pre class="failureMsg">TypeError: Cannot read properties of null (reading 'role')
    at role (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\middleware\auth.js:27:38)
    at Object.middleware (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\middleware\auth.test.js:96:7)
    at Promise.then.completed (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\node_modules\jest-runner\build\runTest.js:444:34)</pre></div></div></div></details><details id="suite-3" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\manager.test.js</div><div class="suite-time warn">9.034s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels</div><div class="test-title">should get all hotels managed by the manager</div><div class="test-status">passed</div><div class="test-duration">0.477s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels</div><div class="test-title">should return empty array for manager with no hotels</div><div class="test-status">passed</div><div class="test-duration">0.381s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels/:hotelId/bookings</div><div class="test-title">should get all bookings for a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.367s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels/:hotelId/bookings</div><div class="test-title">should not allow access to unmanaged hotel bookings</div><div class="test-status">passed</div><div class="test-duration">0.357s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; PUT /api/v1/manager/bookings/:id</div><div class="test-title">should update a booking in a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.381s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; PUT /api/v1/manager/bookings/:id</div><div class="test-title">should not allow updating booking in unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.374s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; DELETE /api/v1/manager/bookings/:id</div><div class="test-title">should delete a booking in a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.388s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; DELETE /api/v1/manager/bookings/:id</div><div class="test-title">should not allow deleting booking in unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.361s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; POST /api/v1/manager/hotels/:hotelId/roomtypes</div><div class="test-title">should create a room type in a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.364s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; POST /api/v1/manager/hotels/:hotelId/roomtypes</div><div class="test-title">should not allow creating room type in unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.362s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; PUT /api/v1/manager/roomtypes/:id</div><div class="test-title">should update a room type in a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.376s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; PUT /api/v1/manager/roomtypes/:id</div><div class="test-title">should not allow updating room type in unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.366s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; PUT /api/v1/manager/roomtypes/:id</div><div class="test-title">should not update non-existent room type</div><div class="test-status">passed</div><div class="test-duration">0.363s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; DELETE /api/v1/manager/roomtypes/:id</div><div class="test-title">should delete a room type from a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.371s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; DELETE /api/v1/manager/roomtypes/:id</div><div class="test-title">should not allow deleting room type from unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.36s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; DELETE /api/v1/manager/roomtypes/:id</div><div class="test-title">should not delete non-existent room type</div><div class="test-status">passed</div><div class="test-duration">0.366s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels/:hotelId/roomtypes</div><div class="test-title">should get all room types for a managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.363s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels/:hotelId/roomtypes</div><div class="test-title">should not allow access to unmanaged hotel room types</div><div class="test-status">passed</div><div class="test-duration">0.355s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels/:hotelId/roomtypes</div><div class="test-title">should handle non-existent hotel</div><div class="test-status">passed</div><div class="test-duration">0.348s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Routes &gt; GET /api/v1/manager/hotels/:hotelId/roomtypes</div><div class="test-title">should return empty array for hotel with no room types</div><div class="test-status">passed</div><div class="test-duration">0.374s</div></div></div></div></details><details id="suite-4" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\hotels.test.js</div><div class="suite-time warn">7.658s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; GET /api/v1/hotels</div><div class="test-title">should get all hotels with pagination</div><div class="test-status">passed</div><div class="test-duration">0.48s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; GET /api/v1/hotels</div><div class="test-title">should filter hotels by province</div><div class="test-status">passed</div><div class="test-duration">0.41s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; GET /api/v1/hotels</div><div class="test-title">should search hotels by name</div><div class="test-status">passed</div><div class="test-duration">0.419s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; GET /api/v1/hotels/:id</div><div class="test-title">should get a single hotel</div><div class="test-status">passed</div><div class="test-duration">0.431s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; GET /api/v1/hotels/:id</div><div class="test-title">should return 404 for non-existent hotel</div><div class="test-status">passed</div><div class="test-duration">0.404s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; POST /api/v1/hotels</div><div class="test-title">should allow admin to create hotel</div><div class="test-status">passed</div><div class="test-duration">0.41s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; POST /api/v1/hotels</div><div class="test-title">should not allow duplicate hotel names</div><div class="test-status">passed</div><div class="test-duration">0.432s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; POST /api/v1/hotels</div><div class="test-title">should validate required fields</div><div class="test-status">passed</div><div class="test-duration">0.436s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; POST /api/v1/hotels</div><div class="test-title">should not allow non-admin users to create hotels</div><div class="test-status">passed</div><div class="test-duration">0.418s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; PUT /api/v1/hotels/:id</div><div class="test-title">should allow admin to update hotel</div><div class="test-status">passed</div><div class="test-duration">0.417s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; PUT /api/v1/hotels/:id</div><div class="test-title">should not allow managers to update hotels</div><div class="test-status">passed</div><div class="test-duration">0.421s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; PUT /api/v1/hotels/:id</div><div class="test-title">should not allow regular users to update hotels</div><div class="test-status">passed</div><div class="test-duration">0.427s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; DELETE /api/v1/hotels/:id</div><div class="test-title">should allow admin to delete hotel</div><div class="test-status">passed</div><div class="test-duration">0.417s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; DELETE /api/v1/hotels/:id</div><div class="test-title">should not allow manager to delete hotels</div><div class="test-status">passed</div><div class="test-duration">0.42s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; DELETE /api/v1/hotels/:id</div><div class="test-title">should not allow regular users to delete hotels</div><div class="test-status">passed</div><div class="test-duration">0.418s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Routes &gt; DELETE /api/v1/hotels/:id</div><div class="test-title">should handle non-existent hotel</div><div class="test-status">passed</div><div class="test-duration">0.415s</div></div></div></div></details><details id="suite-5" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\roomTypes.test.js</div><div class="suite-time warn">6.731s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; GET /api/v1/roomtypes</div><div class="test-title">should get all room types</div><div class="test-status">passed</div><div class="test-duration">0.352s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; GET /api/v1/roomtypes/:id</div><div class="test-title">should get a single room type</div><div class="test-status">passed</div><div class="test-duration">0.288s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; GET /api/v1/roomtypes/:id</div><div class="test-title">should return 404 for non-existent room type</div><div class="test-status">passed</div><div class="test-duration">0.284s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; GET /api/v1/roomtypes/hotel/:hotelId</div><div class="test-title">should get all room types for a specific hotel</div><div class="test-status">passed</div><div class="test-duration">0.302s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; GET /api/v1/roomtypes/hotel/:hotelId</div><div class="test-title">should return 404 for non-existent hotel</div><div class="test-status">passed</div><div class="test-duration">0.291s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; POST /api/v1/roomtypes</div><div class="test-title">should create a new room type if admin</div><div class="test-status">passed</div><div class="test-duration">0.305s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; POST /api/v1/roomtypes</div><div class="test-title">should not create room type with duplicate name in same hotel</div><div class="test-status">passed</div><div class="test-duration">0.298s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; PUT /api/v1/roomtypes/:id</div><div class="test-title">should update a room type if admin</div><div class="test-status">passed</div><div class="test-duration">0.297s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; PUT /api/v1/roomtypes/:id</div><div class="test-title">should not update non-existent room type</div><div class="test-status">passed</div><div class="test-duration">0.298s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; DELETE /api/v1/roomtypes/:id</div><div class="test-title">should delete a room type if admin</div><div class="test-status">passed</div><div class="test-duration">0.307s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; DELETE /api/v1/roomtypes/:id</div><div class="test-title">should not delete non-existent room type</div><div class="test-status">passed</div><div class="test-duration">0.286s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Manager Room Type Operations &gt; PUT /api/v1/manager/roomtypes/:id</div><div class="test-title">should allow manager to update room type for managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.314s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Manager Room Type Operations &gt; PUT /api/v1/manager/roomtypes/:id</div><div class="test-title">should not allow manager to update room type for unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.306s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Manager Room Type Operations &gt; DELETE /api/v1/manager/roomtypes/:id</div><div class="test-title">should allow manager to delete room type from managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.295s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Manager Room Type Operations &gt; DELETE /api/v1/manager/roomtypes/:id</div><div class="test-title">should not allow manager to delete room type from unmanaged hotel</div><div class="test-status">passed</div><div class="test-duration">0.313s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Room Type Validation</div><div class="test-title">should not create room type with invalid capacity</div><div class="test-status">passed</div><div class="test-duration">0.294s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Room Type Validation</div><div class="test-title">should not create room type with invalid bed type</div><div class="test-status">passed</div><div class="test-duration">0.289s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Room Type Validation</div><div class="test-title">should not create room type with negative base price</div><div class="test-status">passed</div><div class="test-duration">0.288s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Room Type Routes &gt; Room Type Validation</div><div class="test-title">should allow creating room type with zero total rooms</div><div class="test-status">passed</div><div class="test-duration">0.295s</div></div></div></div></details><details id="suite-6" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\bookings.test.js</div><div class="suite-time">4.377s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; GET /api/v1/bookings</div><div class="test-title">should get user's own bookings</div><div class="test-status">passed</div><div class="test-duration">0.35s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; GET /api/v1/bookings</div><div class="test-title">should allow admin to get all bookings</div><div class="test-status">passed</div><div class="test-duration">0.377s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; GET /api/v1/bookings</div><div class="test-title">should not allow access without authentication</div><div class="test-status">passed</div><div class="test-duration">0.288s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; POST /api/v1/hotels/:hotelId/bookings</div><div class="test-title">should create a new booking</div><div class="test-status">passed</div><div class="test-duration">0.299s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; POST /api/v1/hotels/:hotelId/bookings</div><div class="test-title">should enforce booking limit per user</div><div class="test-status">passed</div><div class="test-duration">0.301s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; POST /api/v1/hotels/:hotelId/bookings</div><div class="test-title">should not allow booking for another user</div><div class="test-status">passed</div><div class="test-duration">0.352s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; POST /api/v1/hotels/:hotelId/bookings</div><div class="test-title">should handle non-existent hotel</div><div class="test-status">passed</div><div class="test-duration">0.281s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; PUT /api/v1/bookings/:id</div><div class="test-title">should update booking dates</div><div class="test-status">passed</div><div class="test-duration">0.287s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; PUT /api/v1/bookings/:id</div><div class="test-title">should return 404 for non-existent booking</div><div class="test-status">passed</div><div class="test-duration">0.28s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; DELETE /api/v1/bookings/:id</div><div class="test-title">should delete booking</div><div class="test-status">passed</div><div class="test-duration">0.293s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Routes &gt; DELETE /api/v1/bookings/:id</div><div class="test-title">should return 404 for non-existent booking</div><div class="test-status">passed</div><div class="test-duration">0.285s</div></div></div></div></details><details id="suite-7" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\accounts.test.js</div><div class="suite-time">3.953s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; GET /api/v1/accounts</div><div class="test-title">should allow admin to get all users</div><div class="test-status">passed</div><div class="test-duration">0.269s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; GET /api/v1/accounts</div><div class="test-title">should not allow access without authentication</div><div class="test-status">passed</div><div class="test-duration">0.217s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; GET /api/v1/accounts</div><div class="test-title">should handle pagination</div><div class="test-status">passed</div><div class="test-duration">1.117s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; GET /api/v1/accounts/:id</div><div class="test-title">should allow admin to get a specific user</div><div class="test-status">passed</div><div class="test-duration">0.224s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; GET /api/v1/accounts/:id</div><div class="test-title">should return 404 for non-existent user</div><div class="test-status">passed</div><div class="test-duration">0.211s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; PUT /api/v1/accounts/:id</div><div class="test-title">should allow admin to update user</div><div class="test-status">passed</div><div class="test-duration">0.209s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; PUT /api/v1/accounts/:id</div><div class="test-title">should not update user with invalid data</div><div class="test-status">passed</div><div class="test-duration">0.217s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; DELETE /api/v1/accounts/:id</div><div class="test-title">should allow admin to delete user</div><div class="test-status">passed</div><div class="test-duration">0.211s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; DELETE /api/v1/accounts/:id</div><div class="test-title">should not allow deleting the last admin account</div><div class="test-status">passed</div><div class="test-duration">0.213s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Account Management Routes &gt; DELETE /api/v1/accounts/:id</div><div class="test-title">should return 404 for non-existent user</div><div class="test-status">passed</div><div class="test-duration">0.207s</div></div></div></div></details><details id="suite-8" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\auth.test.js</div><div class="suite-time">2.354s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/register</div><div class="test-title">should register a new user</div><div class="test-status">passed</div><div class="test-duration">0.12s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/register</div><div class="test-title">should not register user with existing email</div><div class="test-status">passed</div><div class="test-duration">0.132s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/register</div><div class="test-title">should not register user with existing phone number</div><div class="test-status">passed</div><div class="test-duration">0.136s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/register</div><div class="test-title">should validate email format</div><div class="test-status">passed</div><div class="test-duration">0.019s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/register</div><div class="test-title">should require password to be at least 6 characters</div><div class="test-status">passed</div><div class="test-duration">0.015s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/register</div><div class="test-title">should not allow registering as admin</div><div class="test-status">passed</div><div class="test-duration">0.077s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/login</div><div class="test-title">should login with correct credentials</div><div class="test-status">passed</div><div class="test-duration">0.134s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/login</div><div class="test-title">should not login with incorrect password</div><div class="test-status">passed</div><div class="test-duration">0.134s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/login</div><div class="test-title">should not login with non-existent email</div><div class="test-status">passed</div><div class="test-duration">0.076s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; POST /api/v1/auth/login</div><div class="test-title">should require both email and password</div><div class="test-status">passed</div><div class="test-duration">0.073s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; GET /api/v1/auth/me</div><div class="test-title">should get current user profile</div><div class="test-status">passed</div><div class="test-duration">0.151s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; GET /api/v1/auth/me</div><div class="test-title">should not allow access without token</div><div class="test-status">passed</div><div class="test-duration">0.136s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; GET /api/v1/auth/me</div><div class="test-title">should not allow access with invalid token</div><div class="test-status">passed</div><div class="test-duration">0.14s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Routes &gt; GET /api/v1/auth/logout</div><div class="test-title">should logout successfully</div><div class="test-status">passed</div><div class="test-duration">0.012s</div></div></div></div></details><details id="suite-9" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\integration\availability.test.js</div><div class="suite-time">1.663s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/room-types</div><div class="test-title">should return available room types for valid dates</div><div class="test-status">passed</div><div class="test-duration">0.135s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/room-types</div><div class="test-title">should handle room type with existing bookings</div><div class="test-status">passed</div><div class="test-duration">0.098s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/room-types</div><div class="test-title">should handle invalid date format</div><div class="test-status">passed</div><div class="test-duration">0.084s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/room-types</div><div class="test-title">should require all parameters</div><div class="test-status">passed</div><div class="test-duration">0.087s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/hotels</div><div class="test-title">should return available hotels for valid dates</div><div class="test-status">passed</div><div class="test-duration">0.097s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/hotels</div><div class="test-title">should not return hotels with no available rooms</div><div class="test-status">passed</div><div class="test-duration">0.106s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/hotels</div><div class="test-title">should validate dates</div><div class="test-status">passed</div><div class="test-duration">0.087s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Routes &gt; GET /api/v1/availability/hotels</div><div class="test-title">should require both dates</div><div class="test-status">passed</div><div class="test-duration">0.078s</div></div></div></div></details><details id="suite-10" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\bookings.test.js</div><div class="suite-time">1.723s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; GET /api/v1/bookings</div><div class="test-title">should return user bookings for non-admin users</div><div class="test-status">passed</div><div class="test-duration">0.175s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; GET /api/v1/bookings</div><div class="test-title">should return all bookings for admin users</div><div class="test-status">passed</div><div class="test-duration">0.154s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; POST /api/v1/hotels/:hotelId/bookings</div><div class="test-title">should create booking if hotel exists and user has not exceeded limit</div><div class="test-status">passed</div><div class="test-duration">0.088s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; POST /api/v1/hotels/:hotelId/bookings</div><div class="test-title">should not allow more than 3 bookings for regular users</div><div class="test-status">passed</div><div class="test-duration">0.099s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; PUT /api/v1/bookings/:id</div><div class="test-title">should update booking if user owns it</div><div class="test-status">passed</div><div class="test-duration">0.089s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; PUT /api/v1/bookings/:id</div><div class="test-title">should allow admin to update any booking</div><div class="test-status">passed</div><div class="test-duration">0.144s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; DELETE /api/v1/bookings/:id</div><div class="test-title">should delete booking if user owns it</div><div class="test-status">passed</div><div class="test-duration">0.096s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Bookings Controller &gt; DELETE /api/v1/bookings/:id</div><div class="test-title">should not allow user to delete booking they do not own</div><div class="test-status">passed</div><div class="test-duration">0.153s</div></div></div></div></details><details id="suite-11" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\models\Booking.test.js</div><div class="suite-time">1.319s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Model &gt; Validation</div><div class="test-title">should validate a valid booking</div><div class="test-status">passed</div><div class="test-duration">0.166s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Model &gt; Validation</div><div class="test-title">should require user reference</div><div class="test-status">passed</div><div class="test-duration">0.081s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Model &gt; Validation</div><div class="test-title">should require hotel reference</div><div class="test-status">passed</div><div class="test-duration">0.077s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Model &gt; Validation</div><div class="test-title">should require room type reference</div><div class="test-status">passed</div><div class="test-duration">0.077s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Model &gt; Date Handling</div><div class="test-title">should store dates as UTC</div><div class="test-status">passed</div><div class="test-duration">0.08s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Booking Model &gt; Date Handling</div><div class="test-title">should handle different date formats</div><div class="test-status">passed</div><div class="test-duration">0.087s</div></div></div></div></details><details id="suite-12" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\auth.test.js</div><div class="suite-time">1.285s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/register</div><div class="test-title">should register new user with correct response structure</div><div class="test-status">passed</div><div class="test-duration">0.095s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/register</div><div class="test-title">should handle duplicate email registration</div><div class="test-status">passed</div><div class="test-duration">0.134s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/register</div><div class="test-title">should validate required fields</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/login</div><div class="test-title">should successfully login with valid credentials</div><div class="test-status">passed</div><div class="test-duration">0.127s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/login</div><div class="test-title">should reject login with incorrect password</div><div class="test-status">passed</div><div class="test-duration">0.12s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/login</div><div class="test-title">should validate required login fields</div><div class="test-status">passed</div><div class="test-duration">0.066s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Auth Controller &gt; POST /api/v1/auth/login</div><div class="test-title">should handle non-existent email</div><div class="test-status">passed</div><div class="test-duration">0.066s</div></div></div></div></details><details id="suite-13" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\models\Hotel.test.js</div><div class="suite-time">1.005s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should validate a valid hotel</div><div class="test-status">passed</div><div class="test-duration">0.044s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require name</div><div class="test-status">passed</div><div class="test-duration">0.012s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require unique name</div><div class="test-status">passed</div><div class="test-duration">0.023s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require address</div><div class="test-status">passed</div><div class="test-duration">0.009s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require district</div><div class="test-status">passed</div><div class="test-duration">0.006s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require province</div><div class="test-status">passed</div><div class="test-duration">0.01s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require valid postal code</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require picture URL</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should require description</div><div class="test-status">passed</div><div class="test-duration">0.006s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should allow optional telephone number</div><div class="test-status">passed</div><div class="test-duration">0.011s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Validation</div><div class="test-title">should enforce name length limit</div><div class="test-status">passed</div><div class="test-duration">0.006s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Virtual Fields</div><div class="test-title">should populate virtual bookings field</div><div class="test-status">passed</div><div class="test-duration">0.096s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotel Model &gt; Virtual Fields</div><div class="test-title">should return empty array when hotel has no bookings</div><div class="test-status">passed</div><div class="test-duration">0.072s</div></div></div></div></details><details id="suite-14" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\models\User.test.js</div><div class="suite-time">0.877s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">User Model &gt; Validation</div><div class="test-title">should require name</div><div class="test-status">passed</div><div class="test-duration">0.018s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">User Model &gt; Validation</div><div class="test-title">should require valid email format</div><div class="test-status">passed</div><div class="test-duration">0.006s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">User Model &gt; Validation</div><div class="test-title">should require valid phone number</div><div class="test-status">passed</div><div class="test-duration">0.009s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">User Model &gt; Password Hashing</div><div class="test-title">should hash password before saving</div><div class="test-status">passed</div><div class="test-duration">0.072s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">User Model &gt; JWT Token Generation</div><div class="test-title">should generate valid JWT token</div><div class="test-status">passed</div><div class="test-duration">0.064s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">User Model &gt; JWT Token Generation</div><div class="test-title">should include correct payload in token</div><div class="test-status">passed</div><div class="test-duration">0.068s</div></div></div></div></details><details id="suite-15" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\hotels.test.js</div><div class="suite-time">0.571s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotels Controller &gt; GET /api/v1/hotels</div><div class="test-title">should filter hotels by province</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotels Controller &gt; GET /api/v1/hotels</div><div class="test-title">should handle empty search results</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotels Controller &gt; POST /api/v1/hotels</div><div class="test-title">should handle duplicate hotel names</div><div class="test-status">passed</div><div class="test-duration">0.012s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotels Controller &gt; POST /api/v1/hotels</div><div class="test-title">should validate required fields</div><div class="test-status">passed</div><div class="test-duration">0.005s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Hotels Controller &gt; DELETE /api/v1/hotels/:id</div><div class="test-title">should delete hotel</div><div class="test-status">passed</div><div class="test-duration">0.006s</div></div></div></div></details><details id="suite-16" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\roomTypes.test.js</div><div class="suite-time">0.427s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomTypes Controller &gt; GET /api/v1/roomtypes</div><div class="test-title">should get all room types</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomTypes Controller &gt; GET /api/v1/roomtypes</div><div class="test-title">should handle database errors</div><div class="test-status">passed</div><div class="test-duration">0.016s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomTypes Controller &gt; GET /api/v1/roomtypes/:id</div><div class="test-title">should return 404 if room type not found</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomTypes Controller &gt; POST /api/v1/roomtypes</div><div class="test-title">should handle validation errors</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomTypes Controller &gt; PUT /api/v1/roomtypes/:id</div><div class="test-title">should update a room type</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">RoomTypes Controller &gt; DELETE /api/v1/roomtypes/:id</div><div class="test-title">should delete a room type</div><div class="test-status">passed</div><div class="test-duration"> </div></div></div></div></details><details id="suite-17" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\accounts.test.js</div><div class="suite-time">0.425s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Accounts Controller &gt; GET /api/v1/accounts</div><div class="test-title">should get all users with pagination</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Accounts Controller &gt; GET /api/v1/accounts</div><div class="test-title">should handle pagination parameters</div><div class="test-status">passed</div><div class="test-duration"> </div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Accounts Controller &gt; GET /api/v1/accounts/:id</div><div class="test-title">should get user by ID</div><div class="test-status">passed</div><div class="test-duration"> </div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Accounts Controller &gt; GET /api/v1/accounts/:id</div><div class="test-title">should handle user not found</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Accounts Controller &gt; PUT /api/v1/accounts/:id</div><div class="test-title">should update user details</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Accounts Controller &gt; DELETE /api/v1/accounts/:id</div><div class="test-title">should delete user and related bookings</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div></div></details><details id="suite-18" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\availability.test.js</div><div class="suite-time">0.379s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Controller &gt; GET /api/v1/availability/room-types</div><div class="test-title">should return available room types for given dates</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Controller &gt; GET /api/v1/availability/room-types</div><div class="test-title">should handle non-existent hotel</div><div class="test-status">passed</div><div class="test-duration">0.006s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Controller &gt; GET /api/v1/availability/room-types</div><div class="test-title">should handle invalid date format</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Availability Controller &gt; GET /api/v1/availability/room-types</div><div class="test-title">should validate check-in is before check-out</div><div class="test-status">passed</div><div class="test-duration"> </div></div></div></div></details><details id="suite-19" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\config\db.test.js</div><div class="suite-time">0.37s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Database Connection Tests &gt; Connection Handling</div><div class="test-title">should handle connection string validation</div><div class="test-status">passed</div><div class="test-duration">0.028s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Database Connection Tests &gt; Connection Handling</div><div class="test-title">should handle invalid port number</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Database Connection Tests &gt; Connection Handling</div><div class="test-title">should handle connection timeout</div><div class="test-status">passed</div><div class="test-duration">0.108s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Database Connection Tests &gt; Connection Handling</div><div class="test-title">should handle basic connection attempt</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div></div></details><details id="suite-20" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\middleware\managerAuth.test.js</div><div class="suite-time">0.319s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Auth Middleware &gt; checkManagerHotelAccess</div><div class="test-title">should require hotel ID</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Auth Middleware &gt; checkManagerHotelAccess</div><div class="test-title">should check manager role</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Auth Middleware &gt; checkManagerHotelAccess</div><div class="test-title">should check hotel access permission</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Auth Middleware &gt; checkManagerHotelAccess</div><div class="test-title">should grant access to managed hotel</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div></div></details><details id="suite-21" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\controllers\manager.test.js</div><div class="suite-time">0.325s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Controller &gt; GET /api/v1/manager/hotels</div><div class="test-title">should get hotels managed by the authenticated manager</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Manager Controller &gt; GET /api/v1/manager/hotels</div><div class="test-title">should return empty array for manager with no hotels</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div></div></details><details id="suite-22" class="suite-container" open=""><summary class="suite-info"><div class="suite-path">C:\Users\thana\Desktop\Chula_CEDT\Year1_2\SE_lab\project\CozyHotel-SE-BE\__tests__\unit\middleware\jwt.test.js</div><div class="suite-time">0.215s</div></summary><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">JWT Middleware &gt; protect middleware</div><div class="test-title">should return 401 if no token provided</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">JWT Middleware &gt; protect middleware</div><div class="test-title">should verify Bearer token</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">JWT Middleware &gt; protect middleware</div><div class="test-title">should fail with invalid token</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">JWT Middleware &gt; authorize middleware</div><div class="test-title">should allow authorized roles</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">JWT Middleware &gt; authorize middleware</div><div class="test-title">should reject unauthorized roles</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div></div></details></main></body></html>